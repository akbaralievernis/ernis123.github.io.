<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тогуз Коргоол</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .board {
            display: grid;
            grid-template-columns: repeat(9, 60px);
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }
        .hole {
            width: 60px;
            height: 60px;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 16px;
            cursor: pointer;
            position: relative;
        }
        .hole img {
            width: 40px;
            height: 40px;
        }
        .scores {
            margin-bottom: 20px;
        }
        .hole .stones {
            position: absolute;
            bottom: 5px;
            right: 5px;
            font-size: 12px;
            background-color: white;
            border-radius: 50%;
            padding: 2px 5px;
        }
    </style>
</head>
<body>
    <h1>Тогуз Коргоол</h1>
    <div class="scores">
        <span id="player1-score">Очки Игрока: 0</span> | 
        <span id="player2-score">Очки Бота: 0</span>
    </div>
    <div id="board" class="board"></div>
    <div>
        <button onclick="restartGame()">Начать заново</button>
    </div>

    <script>
        let board = [
            [9, 9, 9, 9, 9, 9, 9, 9, 9],  // Лунки игрока
            [9, 9, 9, 9, 9, 9, 9, 9, 9]   // Лунки бота
        ];
        let scores = [0, 0];
        let currentPlayer = 0;  // Игрок начинает

        function createBoard() {
            const boardElement = document.getElementById('board');
            boardElement.innerHTML = '';  // Очистить доску
            for (let i = 0; i < 9; i++) {
                // Лунки бота (в верхней строке)
                const hole2 = document.createElement('div');
                hole2.className = 'hole';
                hole2.innerHTML = `<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/Marble_red.png/600px-Marble_red.png" alt="marble"><div class="stones">${board[1][i]}</div>`;
                boardElement.appendChild(hole2);
            }
            for (let i = 0; i < 9; i++) {
                // Лунки игрока (в нижней строке)
                const hole1 = document.createElement('div');
                hole1.className = 'hole';
                hole1.innerHTML = `<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/Marble_red.png/600px-Marble_red.png" alt="marble"><div class="stones">${board[0][i]}</div>`;
                hole1.onclick = () => makeMove(0, i);
                boardElement.appendChild(hole1);
            }
        }

        function makeMove(player, holeIndex) {
            if (player !== currentPlayer) {
                alert("Сейчас не ваш ход!");
                return;
            }

            let stones = board[player][holeIndex];
            if (stones === 0) {
                alert("Эта лунка пуста!");
                return;
            }

            board[player][holeIndex] = 0;
            let side = player;
            let hole = holeIndex;

            while (stones > 0) {
                hole++;
                if (hole > 8) {
                    hole = 0;
                    side = 1 - side;  // Переключение на противоположную сторону
                }
                board[side][hole]++;
                stones--;
            }

            // Проверка на захват камней
            if (board[side][hole] % 2 === 0 && side !== currentPlayer) {
                scores[currentPlayer] += board[side][hole];
                board[side][hole] = 0;
            }

            currentPlayer = 1 - currentPlayer;
            updateBoard();

            if (currentPlayer === 1) {
                setTimeout(botMove, 1000);  // Ход бота с небольшой задержкой
            }

            checkGameOver();
        }

        function botMove() {
            let validMoves = board[1].map((stones, index) => stones > 0 ? index : -1).filter(index => index !== -1);
            let randomMove = validMoves[Math.floor(Math.random() * validMoves.length)];
            makeMove(1, randomMove);
        }

        function updateBoard() {
            createBoard();
            document.getElementById('player1-score').textContent = `Очки Игрока: ${scores[0]}`;
            document.getElementById('player2-score').textContent = `Очки Бота: ${scores[1]}`;
        }

        function checkGameOver() {
            if (board[0].every(hole => hole === 0) || board[1].every(hole => hole === 0)) {
                let winner = scores[0] > scores[1] ? 'Игрок' : 'Бот';
                if (scores[0] === scores[1]) {
                    winner = 'Ничья';
                }
                alert(`Игра окончена! Победитель: ${winner}`);
                restartGame();
            }
        }

        function restartGame() {
            board = [
                [9, 9, 9, 9, 9, 9, 9, 9, 9],
                [9, 9, 9, 9, 9, 9, 9, 9, 9]
            ];
            scores = [0, 0];
            currentPlayer = 0;
            updateBoard();
        }

        // Инициализация игры
        createBoard();
    </script>
</body>
</html>